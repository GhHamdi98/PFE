<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ajouter service</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Font Awesome -->
    <title>{% block title %}Welcome!{% endblock %}</title>
    {% block stylesheets %}
        <link rel="apple-touch-icon" sizes="76x76" href="{{ asset('demande/assets/img/apple-icon.png') }}" />
        <link rel="icon" type="image/png" href="{{ asset('demande/assets/img/favicon.png') }}" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">        <link rel="stylesheet" href="{{ asset('plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css') }}">
        <link rel="stylesheet" href="{{ asset('plugins/fontawesome-free/css/all.min.css') }}">
        <!-- iCheck -->
        <link rel="stylesheet" href="{{ asset('plugins/icheck-bootstrap/icheck-bootstrap.min.css') }}">
        <!-- JQVMap -->
        <link rel="stylesheet" href="{{ asset('plugins/jqvmap/jqvmap.min.css')}}">
        <!-- Theme style -->
        <link rel="stylesheet" href="{{ asset('dist/css/adminlte.min.css') }}">
        <!-- overlayScrollbars -->
        <link rel="stylesheet" href="{{ asset('plugins/overlayScrollbars/css/OverlayScrollbars.min.css') }}">
        <!-- Daterange picker -->
        <link rel="stylesheet" href="{{ asset('plugins/daterangepicker/daterangepicker.css') }}">
        <!-- summernote -->
        <link rel="stylesheet" href="{{ asset('plugins/summernote/summernote-bs4.css') }}">
        <!-- Google Font: Source Sans Pro -->
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    {% endblock %}
</head>
<body class="hold-transition sidebar-mini layout-fixed">
{% block body %}
    <div class="wrapper">

        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
                </li>

            </ul>

            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- Messages Dropdown Menu -->
                <li class="nav-item dropdown">
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-divider"></div>
                    </div>
                    <!-- Message End -->

                </li>
                <!-- Notifications Dropdown Menu -->
                <li class="nav-item dropdown">
                </li>
                <li class="nav-item">
                    <a href="{{ path('user_disconnected',{'id' :app.user.id}) }}"><img title="Se déconnecter" src="https://img.icons8.com/color/28/000000/export.png"/></a>
                </li>
            </ul>
        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="/user" class="brand-link">
                <img src="{{ asset('dist/img/AdminLTELogo.png') }}"
                     alt="AdminLTE Logo"
                     class="brand-image img-circle elevation-3"
                     style="opacity: .8">
                <span class="brand-text font-weight-light">Quote Request</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="https://img.icons8.com/bubbles/30/000000/admin-settings-male.png"/>
                    </div>
                    <div class="info">
                        <a href="{{ path('user_show', {'id': app.user.id}) }}" class="d-block">{{app.user.username}}</a>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                        <!-- Add icons to the links using the .nav-icon class
                             with font-awesome or any other icon font library -->
                        <li class="nav-item has-treeview ">
                            <a href="#" class="nav-link ">
                                <i><img src="{{ asset('dist/img/group.png') }}"></i>
                                <p>
                                    Utilisateurs
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item ">
                                    <a href="/user" class="nav-link ">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>&nbsp; Liste des Utilisateur</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/user/new" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Ajouter Utilisateur</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-treeview  ">
                            <a href="#" class="nav-link ">
                                <i><img src="{{ asset('img/demande.png.png') }}"></i>                                <p>
                                    Demande
                                    <i class="fas fa-angle-left right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview ">
                                <li class="nav-item ">
                                    <a href="/demande" class="nav-link ">
                                        <i class="far fa-circle nav-icon"></i>                                <p>
                                        <p>Liste des Demandes</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-treeview menu-open">
                            <a href="#" class="nav-link active">
                                <i class=""><img src="{{ asset('img/service.png') }}"></i>
                                <p>
                                    Services
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="/service" class="nav-link ">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Liste des services</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/service/new" class="nav-link active">
                                        <i><i class="far fa-circle nav-icon"></i></i>                                <p>
                                        <p>Ajouter Service</p>
                                    </a>
                                </li>
                                <li class="nav-item">

                                <li class="nav-item has-treeview ">
                                    <a href="#" class="nav-link ">
                                        <i><img src="{{ asset('img/pays.png') }}"></i>                                <p>
                                            Pays
                                            <i class="fas fa-angle-left right"></i>
                                        </p>
                                    </a>
                                    <ul class="nav nav-treeview ">
                                        <li class="nav-item ">
                                            <a href="/pays" class="nav-link">
                                                &nbsp;&nbsp;&nbsp;<i class="far fa-circle nav-icon"></i>                                <p>
                                                <p>Liste des Pays</p>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="/pays/new" class="nav-link">
                                                &nbsp;&nbsp;&nbsp;<i class="far fa-circle nav-icon"></i>                               <p>
                                                <p>Ajouter Pays</p>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                                <li class="nav-item has-treeview ">
                                    <a href="#" class="nav-link ">
                                        <i><img src="https://img.icons8.com/windows/24/000000/user-settings.png"></i>                                <p>
                                            Compte
                                            <i class="fas fa-angle-left right"></i>
                                        </p>
                                    </a>
                                    <ul class="nav nav-treeview ">
                                        <li class="nav-item ">
                                            <a href="{{ path('user_Accountedit', {'id': app.user.id}) }}" class="nav-link ">
                                                &nbsp;&nbsp;&nbsp;<i class="far fa-circle nav-icon"></i>                                <p>
                                                <p>Gérer compte</p>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="nav-item has-treeview">
                                    <a href="#" class="nav-link">
                                        <i><img src="https://img.icons8.com/ios/26/000000/composing-mail.png"></i>
                                        <p>
                                            Mail
                                            <i class="right fas fa-angle-left"></i>
                                        </p>
                                    </a>
                                    <ul class="nav nav-treeview">
                                        <li class="nav-item ">
                                            <a href="{{ path('mail_index') }}" class="nav-link ">
                                                <i class="far fa-circle nav-icon"></i>
                                                <p>&nbsp; Liste des Mails</p>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="{{ path('mail_new') }}" class="nav-link ">
                                                <i class="far fa-circle nav-icon"></i>
                                                <p>Ajouter mail</p>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="{{ path('send_mails') }}" class="nav-link ">
                                                <i class="far fa-circle nav-icon"></i>
                                                <p>Envoyer mail</p>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">

                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>
            <!-- /.content-header -->

            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <!-- Small boxes (Stat box) -->
                    <div class="row">

                        <!-- ./col -->
                    </div>
                    <!-- /.row -->
                    <!-- Main row -->
                    <div class="row">
                        <!-- Left col -->
                        <section class="col-lg-12 connectedSortable">
                            <!-- Custom tabs (Charts with tabs)-->
                            <div class="card">
                                <div class="card-body">
                                    {% if erreur == null %}
                                        <script class="alert-default-warning">alert("Ce service existe déja!!")</script>
                                    {% endif %}
                                    {{form_start(form)}}
                                    {{ form_row(form.pays) }}<br>
                                    <fieldset >
                                        <legend><h2 class="panel-info">Service :</h2></legend>
                                        {{ form_row(form.nomService) }}
                                        {{ form_row(form.prix) }}<br>
                                    </fieldset>
                                    <fieldset>
                                        <legend><h3>Option :</h3></legend>
                                        <div class="col-sm-10 offset-sm-1"  id="exp_list" data-prototype = " {{ form_widget ( form.options.vars.prototype )| e ( 'html_attr' ) }} ">
                                            {% for row in form.options %}

                                                <div class="panel panel-warning">
                                                    <div class="panel-heading">
                                                        <div class="panel-body">
                                                            {{ form_row(row) }}<br>
                                                        </div>
                                                    </div>
                                                </div><br>
                                            {% endfor %}
                                        </div><br>
                                    </fieldset>
                                    <div class="container-fluid">
                                        <!-- Small boxes (Stat box) -->
                                        <div class="row">
                                            <br><br><!-- ./col -->
                                        </div>
                                        <!-- /.row -->
                                        <!-- Main row -->
                                        <div class="row">
                                            <!-- Left col -->
                                            <section class="col-lg-7">
                                                <!-- Custom tabs (Charts with tabs)-->
                                                <div class="card col-lg-12">
                                                    <div class="card-body pad">
                                                        <div class="mb-3">
                                                    {{ form_row(form.contrat, {'attr': {'class': 'textarea'}}) }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </section>
                                            <section class="col-lg-5 connectedSortable card">
                                                <h3 class="text-center">TAGS</h3><br>
                                                <!-- Map card -->
                                                <p class="alert-default-warning">SVP essayer de copier puis coller les tags avec les <b>"[]"</b> pour éviter n'importe quel problème.</p>
                                                <div class="row">
                                                    <br class="card">
                                                    <div class="col card"><br>
                                                        <h4>Client :</h4>
                                                    <b>Nom et Prenom</b> : &nbsp;&nbsp;[username]<br>
                                                    <b>Email</b> : &nbsp;&nbsp;[email]<br>
                                                    <b>Pays</b> : &nbsp;&nbsp;[pays]<br><br>
                                                    </div>
                                                    <hr >
                                                    <div class="col card"><br>
                                                    <h4>Demande :</h4>
                                                    <b>Service</b> : &nbsp;&nbsp;[Service]<br>
                                                    <b>Options</b> : &nbsp;&nbsp;[Options] <br>
                                                        <b>Tarif Totale</b> : &nbsp;&nbsp;[Tarif] <br>
                                                    </div>
                                                    </div>
                                            </section>
                                            <!-- right col -->
                                        </div>
                                        <!-- /.row (main row) -->
                                    </div><!-- /.container-fluid -->
                                    <button class="btn btn-success">Ajouter</button>
                                    {{ form_end(form) }}
                                    <a href="{{ path('service_index') }}"><i class="fas fa-arrow-left"></i></a>
                                </div><!-- /.card-body -->
                            </div>
                        </section>
                        <!-- right col -->
                    </div>
                    <!-- /.row (main row) -->
                </div><!-- /.container-fluid -->
            </section>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->
        <footer class="main-footer">

        </footer>

        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->

{% endblock %}
{% block javascripts %}
    <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <script>
        $(function () {
            // Summernote
            $('.textarea').summernote()
        })
    </script>
    <script>

        // this variable is the list in the dom, it's initiliazed when the document is ready
        var $collectionHolder;
        // the link which we click on to add new items
        var $addNewItem = $('<a href="#" class="btn btn-success">Ajouter</a>');
        // when the page is loaded and ready
        $(document).ready(function () {
            // get the collectionHolder, initilize the var by getting the list;
            $collectionHolder = $('#exp_list');
            // append the add new item link to the collectionHolder
            $collectionHolder.append($addNewItem);
            // add an index property to the collectionHolder which helps track the count of forms we have in the list
            $collectionHolder.data('index', $collectionHolder.find('.panel').length)
            // finds all the panels in the list and foreach one of them we add a remove button to it
            // add remove button to existing items
            $collectionHolder.find('.panel').each(function () {
                // $(this) means the current panel that we are at
                // which means we pass the panel to the addRemoveButton function
                // inside the function we create a footer and remove link and append them to the panel
                // more informations in the function inside
                addRemoveButton($(this));
            });
            // handle the click event for addNewItem
            $addNewItem.click(function (e) {
                // preventDefault() is your  homework if you don't know what it is
                // also look up preventPropagation both are usefull
                e.preventDefault();
                // create a new form and append it to the collectionHolder
                // and by form we mean a new panel which contains the form
                addNewForm();
            })
        });
        /*
         * creates a new form and appends it to the collectionHolder
         */
        function addNewForm() {
            // getting the prototype
            // the prototype is the form itself, plain html
            var prototype = $collectionHolder.data('prototype');
            // get the index
            // this is the index we set when the document was ready, look above for more info
            var index = $collectionHolder.data('index');
            // create the form
            var newForm = prototype;
            // replace the __name__ string in the html using a regular expression with the index value
            newForm = newForm.replace(/__name__/g, index);
            // incrementing the index data and setting it again to the collectionHolder
            $collectionHolder.data('index', index+1);
            // create the panel
            // this is the panel that will be appending to the collectionHolder
            var $panel = $('<div class="panel panel-warning"><div class="panel-heading"></div></div>');
            // create the panel-body and append the form to it
            var $panelBody = $('<div class="panel-body"></div>').append(newForm);
            // append the body to the panel
            $panel.append($panelBody);
            // append the removebutton to the new panel
            addRemoveButton($panel);
            // append the panel to the addNewItem
            // we are doing it this way to that the link is always at the bottom of the collectionHolder
            $addNewItem.before($panel);
        }

        /**
         * adds a remove button to the panel that is passed in the parameter
         * @param $panel
         */
        function addRemoveButton ($panel) {
            // create remove button
            var $removeButton = $('<a href="#" class="btn btn-outline-danger">Supprimer</a>');
            // appending the removebutton to the panel footer
            var $panelFooter = $('<div class="panel-footer"></div>').append($removeButton);
            // handle the click event of the remove button
            $removeButton.click(function (e) {
                e.preventDefault();
                // gets the parent of the button that we clicked on "the panel" and animates it
                // after the animation is done the element (the panel) is removed from the html
                $(e.target).parents('.panel').slideUp(1000, function () {
                    $(this).remove();
                })
            });
            // append the footer to the panel
            $panel.append($panelFooter);
        }
    </script>
    <script src="{{ asset('plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
    <!-- ChartJS -->
    <script src="{{asset('plugins/chart.js/Chart.min.js')}}"></script>
    <!-- Sparkline -->
    <script src="{{ asset('plugins/sparklines/sparkline.js') }}"></script>
    <!-- JQVMap -->
    <script src="{{ asset('plugins/jqvmap/jquery.vmap.min.js') }}"></script>
    <script src="{{ asset('plugins/jqvmap/maps/jquery.vmap.usa.js') }}"></script>
    <!-- jQuery Knob Chart -->
    <script src="{{ asset('plugins/jquery-knob/jquery.knob.min.js') }}"></script>
    <!-- daterangepicker -->
    <script src="{{ asset('plugins/moment/moment.min.js') }}"></script>
    <script src="{{ asset('plugins/daterangepicker/daterangepicker.js') }}"></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script src="{{ asset('plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js') }}"></script>
    <!-- Summernote -->
    <script src="{{ asset('plugins/summernote/summernote-bs4.min.js') }}"></script>
    <!-- overlayScrollbars -->
    <script src="{{ asset('plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js') }}"></script>
    <!-- AdminLTE App -->
    <script src="{{ asset('dist/js/adminlte.js') }}"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="{{ asset('dist/js/pages/dashboard.js') }}"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="{{ asset('dist/js/demo.js') }}"></script>
{% endblock %}
</body>
</html>

